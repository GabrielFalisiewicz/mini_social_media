{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _asyncToGenerator = require(\"C:/Users/GabrielFalisiewiczS/OneDrive/Dokumenty/Udemy/backend/kurs1/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.callRule = exports.callSource = exports.InvalidSourceResultException = exports.InvalidRuleResultException = void 0;\nconst core_1 = require(\"@angular-devkit/core\");\nconst rxjs_1 = require(\"rxjs\");\nconst interface_1 = require(\"../tree/interface\");\nfunction _getTypeOfResult(value) {\n  if (value === undefined) {\n    return 'undefined';\n  } else if (value === null) {\n    return 'null';\n  } else if (typeof value == 'function') {\n    return `Function()`;\n  } else if (typeof value != 'object') {\n    return `${typeof value}(${JSON.stringify(value)})`;\n  } else {\n    if (Object.getPrototypeOf(value) == Object) {\n      return `Object(${JSON.stringify(value)})`;\n    } else if (value.constructor) {\n      return `Instance of class ${value.constructor.name}`;\n    } else {\n      return 'Unknown Object';\n    }\n  }\n}\n/**\n * When a rule or source returns an invalid value.\n */\nclass InvalidRuleResultException extends core_1.BaseException {\n  constructor(value) {\n    super(`Invalid rule result: ${_getTypeOfResult(value)}.`);\n  }\n}\nexports.InvalidRuleResultException = InvalidRuleResultException;\nclass InvalidSourceResultException extends core_1.BaseException {\n  constructor(value) {\n    super(`Invalid source result: ${_getTypeOfResult(value)}.`);\n  }\n}\nexports.InvalidSourceResultException = InvalidSourceResultException;\nfunction callSource(source, context) {\n  return (0, rxjs_1.defer)( /*#__PURE__*/_asyncToGenerator(function* () {\n    let result = source(context);\n    if ((0, rxjs_1.isObservable)(result)) {\n      result = yield (0, rxjs_1.lastValueFrom)(result.pipe((0, rxjs_1.defaultIfEmpty)(undefined)));\n    }\n    if (result && interface_1.TreeSymbol in result) {\n      return result;\n    }\n    throw new InvalidSourceResultException(result);\n  }));\n}\nexports.callSource = callSource;\nfunction callRule(rule, input, context) {\n  if ((0, rxjs_1.isObservable)(input)) {\n    return input.pipe((0, rxjs_1.mergeMap)(inputTree => callRuleAsync(rule, inputTree, context)));\n  } else {\n    return (0, rxjs_1.defer)(() => callRuleAsync(rule, input, context));\n  }\n}\nexports.callRule = callRule;\nfunction callRuleAsync(_x, _x2, _x3) {\n  return _callRuleAsync.apply(this, arguments);\n}\nfunction _callRuleAsync() {\n  _callRuleAsync = _asyncToGenerator(function* (rule, tree, context) {\n    let result = yield rule(tree, context);\n    while (typeof result === 'function') {\n      // This is considered a Rule, chain the rule and return its output.\n      result = yield result(tree, context);\n    }\n    if (typeof result === 'undefined') {\n      return tree;\n    }\n    if ((0, rxjs_1.isObservable)(result)) {\n      result = yield (0, rxjs_1.lastValueFrom)(result.pipe((0, rxjs_1.defaultIfEmpty)(tree)));\n    }\n    if (result && interface_1.TreeSymbol in result) {\n      return result;\n    }\n    throw new InvalidRuleResultException(result);\n  });\n  return _callRuleAsync.apply(this, arguments);\n}","map":{"version":3,"names":["_asyncToGenerator","require","default","Object","defineProperty","exports","value","callRule","callSource","InvalidSourceResultException","InvalidRuleResultException","core_1","rxjs_1","interface_1","_getTypeOfResult","undefined","JSON","stringify","getPrototypeOf","constructor","name","BaseException","source","context","defer","result","isObservable","lastValueFrom","pipe","defaultIfEmpty","TreeSymbol","rule","input","mergeMap","inputTree","callRuleAsync","_x","_x2","_x3","_callRuleAsync","apply","arguments","tree"],"sources":["C:/Users/GabrielFalisiewiczS/OneDrive/Dokumenty/Udemy/backend/kurs1/node_modules/@angular-devkit/schematics/src/rules/call.js"],"sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.callRule = exports.callSource = exports.InvalidSourceResultException = exports.InvalidRuleResultException = void 0;\nconst core_1 = require(\"@angular-devkit/core\");\nconst rxjs_1 = require(\"rxjs\");\nconst interface_1 = require(\"../tree/interface\");\nfunction _getTypeOfResult(value) {\n    if (value === undefined) {\n        return 'undefined';\n    }\n    else if (value === null) {\n        return 'null';\n    }\n    else if (typeof value == 'function') {\n        return `Function()`;\n    }\n    else if (typeof value != 'object') {\n        return `${typeof value}(${JSON.stringify(value)})`;\n    }\n    else {\n        if (Object.getPrototypeOf(value) == Object) {\n            return `Object(${JSON.stringify(value)})`;\n        }\n        else if (value.constructor) {\n            return `Instance of class ${value.constructor.name}`;\n        }\n        else {\n            return 'Unknown Object';\n        }\n    }\n}\n/**\n * When a rule or source returns an invalid value.\n */\nclass InvalidRuleResultException extends core_1.BaseException {\n    constructor(value) {\n        super(`Invalid rule result: ${_getTypeOfResult(value)}.`);\n    }\n}\nexports.InvalidRuleResultException = InvalidRuleResultException;\nclass InvalidSourceResultException extends core_1.BaseException {\n    constructor(value) {\n        super(`Invalid source result: ${_getTypeOfResult(value)}.`);\n    }\n}\nexports.InvalidSourceResultException = InvalidSourceResultException;\nfunction callSource(source, context) {\n    return (0, rxjs_1.defer)(async () => {\n        let result = source(context);\n        if ((0, rxjs_1.isObservable)(result)) {\n            result = await (0, rxjs_1.lastValueFrom)(result.pipe((0, rxjs_1.defaultIfEmpty)(undefined)));\n        }\n        if (result && interface_1.TreeSymbol in result) {\n            return result;\n        }\n        throw new InvalidSourceResultException(result);\n    });\n}\nexports.callSource = callSource;\nfunction callRule(rule, input, context) {\n    if ((0, rxjs_1.isObservable)(input)) {\n        return input.pipe((0, rxjs_1.mergeMap)((inputTree) => callRuleAsync(rule, inputTree, context)));\n    }\n    else {\n        return (0, rxjs_1.defer)(() => callRuleAsync(rule, input, context));\n    }\n}\nexports.callRule = callRule;\nasync function callRuleAsync(rule, tree, context) {\n    let result = await rule(tree, context);\n    while (typeof result === 'function') {\n        // This is considered a Rule, chain the rule and return its output.\n        result = await result(tree, context);\n    }\n    if (typeof result === 'undefined') {\n        return tree;\n    }\n    if ((0, rxjs_1.isObservable)(result)) {\n        result = await (0, rxjs_1.lastValueFrom)(result.pipe((0, rxjs_1.defaultIfEmpty)(tree)));\n    }\n    if (result && interface_1.TreeSymbol in result) {\n        return result;\n    }\n    throw new InvalidRuleResultException(result);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}