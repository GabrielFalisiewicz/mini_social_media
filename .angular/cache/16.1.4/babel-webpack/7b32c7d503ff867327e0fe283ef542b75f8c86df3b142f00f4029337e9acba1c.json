{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Timestamp = void 0;\nconst base_1 = require(\"./base\");\nconst file_1 = require(\"./file\");\nconst utils_1 = require(\"./utils\");\n/**\n * A container for the signed part of timestamp metadata.\n *\n * A top-level that specifies the latest version of the snapshot role metadata file,\n * and hence the latest versions of all metadata and targets on the repository.\n */\nclass Timestamp extends base_1.Signed {\n  constructor(options) {\n    super(options);\n    this.type = base_1.MetadataKind.Timestamp;\n    this.snapshotMeta = options.snapshotMeta || new file_1.MetaFile({\n      version: 1\n    });\n  }\n  equals(other) {\n    if (!(other instanceof Timestamp)) {\n      return false;\n    }\n    return super.equals(other) && this.snapshotMeta.equals(other.snapshotMeta);\n  }\n  toJSON() {\n    return {\n      _type: this.type,\n      spec_version: this.specVersion,\n      version: this.version,\n      expires: this.expires,\n      meta: {\n        'snapshot.json': this.snapshotMeta.toJSON()\n      },\n      ...this.unrecognizedFields\n    };\n  }\n  static fromJSON(data) {\n    const {\n      unrecognizedFields,\n      ...commonFields\n    } = base_1.Signed.commonFieldsFromJSON(data);\n    const {\n      meta,\n      ...rest\n    } = unrecognizedFields;\n    return new Timestamp({\n      ...commonFields,\n      snapshotMeta: snapshotMetaFromJSON(meta),\n      unrecognizedFields: rest\n    });\n  }\n}\nexports.Timestamp = Timestamp;\nfunction snapshotMetaFromJSON(data) {\n  let snapshotMeta;\n  if (utils_1.guard.isDefined(data)) {\n    const snapshotData = data['snapshot.json'];\n    if (!utils_1.guard.isDefined(snapshotData) || !utils_1.guard.isObject(snapshotData)) {\n      throw new TypeError('missing snapshot.json in meta');\n    } else {\n      snapshotMeta = file_1.MetaFile.fromJSON(snapshotData);\n    }\n  }\n  return snapshotMeta;\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","Timestamp","base_1","require","file_1","utils_1","Signed","constructor","options","type","MetadataKind","snapshotMeta","MetaFile","version","equals","other","toJSON","_type","spec_version","specVersion","expires","meta","unrecognizedFields","fromJSON","data","commonFields","commonFieldsFromJSON","rest","snapshotMetaFromJSON","guard","isDefined","snapshotData","isObject","TypeError"],"sources":["C:/Users/GabrielFalisiewiczS/OneDrive/Dokumenty/Udemy/backend/kurs1/node_modules/@tufjs/models/dist/timestamp.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Timestamp = void 0;\nconst base_1 = require(\"./base\");\nconst file_1 = require(\"./file\");\nconst utils_1 = require(\"./utils\");\n/**\n * A container for the signed part of timestamp metadata.\n *\n * A top-level that specifies the latest version of the snapshot role metadata file,\n * and hence the latest versions of all metadata and targets on the repository.\n */\nclass Timestamp extends base_1.Signed {\n    constructor(options) {\n        super(options);\n        this.type = base_1.MetadataKind.Timestamp;\n        this.snapshotMeta = options.snapshotMeta || new file_1.MetaFile({ version: 1 });\n    }\n    equals(other) {\n        if (!(other instanceof Timestamp)) {\n            return false;\n        }\n        return super.equals(other) && this.snapshotMeta.equals(other.snapshotMeta);\n    }\n    toJSON() {\n        return {\n            _type: this.type,\n            spec_version: this.specVersion,\n            version: this.version,\n            expires: this.expires,\n            meta: { 'snapshot.json': this.snapshotMeta.toJSON() },\n            ...this.unrecognizedFields,\n        };\n    }\n    static fromJSON(data) {\n        const { unrecognizedFields, ...commonFields } = base_1.Signed.commonFieldsFromJSON(data);\n        const { meta, ...rest } = unrecognizedFields;\n        return new Timestamp({\n            ...commonFields,\n            snapshotMeta: snapshotMetaFromJSON(meta),\n            unrecognizedFields: rest,\n        });\n    }\n}\nexports.Timestamp = Timestamp;\nfunction snapshotMetaFromJSON(data) {\n    let snapshotMeta;\n    if (utils_1.guard.isDefined(data)) {\n        const snapshotData = data['snapshot.json'];\n        if (!utils_1.guard.isDefined(snapshotData) || !utils_1.guard.isObject(snapshotData)) {\n            throw new TypeError('missing snapshot.json in meta');\n        }\n        else {\n            snapshotMeta = file_1.MetaFile.fromJSON(snapshotData);\n        }\n    }\n    return snapshotMeta;\n}\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,SAAS,GAAG,KAAK,CAAC;AAC1B,MAAMC,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAME,OAAO,GAAGF,OAAO,CAAC,SAAS,CAAC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,MAAMF,SAAS,SAASC,MAAM,CAACI,MAAM,CAAC;EAClCC,WAAWA,CAACC,OAAO,EAAE;IACjB,KAAK,CAACA,OAAO,CAAC;IACd,IAAI,CAACC,IAAI,GAAGP,MAAM,CAACQ,YAAY,CAACT,SAAS;IACzC,IAAI,CAACU,YAAY,GAAGH,OAAO,CAACG,YAAY,IAAI,IAAIP,MAAM,CAACQ,QAAQ,CAAC;MAAEC,OAAO,EAAE;IAAE,CAAC,CAAC;EACnF;EACAC,MAAMA,CAACC,KAAK,EAAE;IACV,IAAI,EAAEA,KAAK,YAAYd,SAAS,CAAC,EAAE;MAC/B,OAAO,KAAK;IAChB;IACA,OAAO,KAAK,CAACa,MAAM,CAACC,KAAK,CAAC,IAAI,IAAI,CAACJ,YAAY,CAACG,MAAM,CAACC,KAAK,CAACJ,YAAY,CAAC;EAC9E;EACAK,MAAMA,CAAA,EAAG;IACL,OAAO;MACHC,KAAK,EAAE,IAAI,CAACR,IAAI;MAChBS,YAAY,EAAE,IAAI,CAACC,WAAW;MAC9BN,OAAO,EAAE,IAAI,CAACA,OAAO;MACrBO,OAAO,EAAE,IAAI,CAACA,OAAO;MACrBC,IAAI,EAAE;QAAE,eAAe,EAAE,IAAI,CAACV,YAAY,CAACK,MAAM,CAAC;MAAE,CAAC;MACrD,GAAG,IAAI,CAACM;IACZ,CAAC;EACL;EACA,OAAOC,QAAQA,CAACC,IAAI,EAAE;IAClB,MAAM;MAAEF,kBAAkB;MAAE,GAAGG;IAAa,CAAC,GAAGvB,MAAM,CAACI,MAAM,CAACoB,oBAAoB,CAACF,IAAI,CAAC;IACxF,MAAM;MAAEH,IAAI;MAAE,GAAGM;IAAK,CAAC,GAAGL,kBAAkB;IAC5C,OAAO,IAAIrB,SAAS,CAAC;MACjB,GAAGwB,YAAY;MACfd,YAAY,EAAEiB,oBAAoB,CAACP,IAAI,CAAC;MACxCC,kBAAkB,EAAEK;IACxB,CAAC,CAAC;EACN;AACJ;AACA5B,OAAO,CAACE,SAAS,GAAGA,SAAS;AAC7B,SAAS2B,oBAAoBA,CAACJ,IAAI,EAAE;EAChC,IAAIb,YAAY;EAChB,IAAIN,OAAO,CAACwB,KAAK,CAACC,SAAS,CAACN,IAAI,CAAC,EAAE;IAC/B,MAAMO,YAAY,GAAGP,IAAI,CAAC,eAAe,CAAC;IAC1C,IAAI,CAACnB,OAAO,CAACwB,KAAK,CAACC,SAAS,CAACC,YAAY,CAAC,IAAI,CAAC1B,OAAO,CAACwB,KAAK,CAACG,QAAQ,CAACD,YAAY,CAAC,EAAE;MACjF,MAAM,IAAIE,SAAS,CAAC,+BAA+B,CAAC;IACxD,CAAC,MACI;MACDtB,YAAY,GAAGP,MAAM,CAACQ,QAAQ,CAACW,QAAQ,CAACQ,YAAY,CAAC;IACzD;EACJ;EACA,OAAOpB,YAAY;AACvB"},"metadata":{},"sourceType":"script","externalDependencies":[]}