{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Targets = void 0;\nconst util_1 = __importDefault(require(\"util\"));\nconst base_1 = require(\"./base\");\nconst delegations_1 = require(\"./delegations\");\nconst file_1 = require(\"./file\");\nconst utils_1 = require(\"./utils\");\n// Container for the signed part of targets metadata.\n//\n// Targets contains verifying information about target files and also delegates\n// responsible to other Targets roles.\nclass Targets extends base_1.Signed {\n  constructor(options) {\n    super(options);\n    this.type = base_1.MetadataKind.Targets;\n    this.targets = options.targets || {};\n    this.delegations = options.delegations;\n  }\n  addTarget(target) {\n    this.targets[target.path] = target;\n  }\n  equals(other) {\n    if (!(other instanceof Targets)) {\n      return false;\n    }\n    return super.equals(other) && util_1.default.isDeepStrictEqual(this.targets, other.targets) && util_1.default.isDeepStrictEqual(this.delegations, other.delegations);\n  }\n  toJSON() {\n    const json = {\n      _type: this.type,\n      spec_version: this.specVersion,\n      version: this.version,\n      expires: this.expires,\n      targets: targetsToJSON(this.targets),\n      ...this.unrecognizedFields\n    };\n    if (this.delegations) {\n      json.delegations = this.delegations.toJSON();\n    }\n    return json;\n  }\n  static fromJSON(data) {\n    const {\n      unrecognizedFields,\n      ...commonFields\n    } = base_1.Signed.commonFieldsFromJSON(data);\n    const {\n      targets,\n      delegations,\n      ...rest\n    } = unrecognizedFields;\n    return new Targets({\n      ...commonFields,\n      targets: targetsFromJSON(targets),\n      delegations: delegationsFromJSON(delegations),\n      unrecognizedFields: rest\n    });\n  }\n}\nexports.Targets = Targets;\nfunction targetsToJSON(targets) {\n  return Object.entries(targets).reduce((acc, [path, target]) => ({\n    ...acc,\n    [path]: target.toJSON()\n  }), {});\n}\nfunction targetsFromJSON(data) {\n  let targets;\n  if (utils_1.guard.isDefined(data)) {\n    if (!utils_1.guard.isObjectRecord(data)) {\n      throw new TypeError('targets must be an object');\n    } else {\n      targets = Object.entries(data).reduce((acc, [path, target]) => ({\n        ...acc,\n        [path]: file_1.TargetFile.fromJSON(path, target)\n      }), {});\n    }\n  }\n  return targets;\n}\nfunction delegationsFromJSON(data) {\n  let delegations;\n  if (utils_1.guard.isDefined(data)) {\n    if (!utils_1.guard.isObject(data)) {\n      throw new TypeError('delegations must be an object');\n    } else {\n      delegations = delegations_1.Delegations.fromJSON(data);\n    }\n  }\n  return delegations;\n}","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","Targets","util_1","require","base_1","delegations_1","file_1","utils_1","Signed","constructor","options","type","MetadataKind","targets","delegations","addTarget","target","path","equals","other","default","isDeepStrictEqual","toJSON","json","_type","spec_version","specVersion","version","expires","targetsToJSON","unrecognizedFields","fromJSON","data","commonFields","commonFieldsFromJSON","rest","targetsFromJSON","delegationsFromJSON","entries","reduce","acc","guard","isDefined","isObjectRecord","TypeError","TargetFile","isObject","Delegations"],"sources":["C:/Users/GabrielFalisiewiczS/OneDrive/Dokumenty/Udemy/backend/kurs1/node_modules/@tufjs/models/dist/targets.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Targets = void 0;\nconst util_1 = __importDefault(require(\"util\"));\nconst base_1 = require(\"./base\");\nconst delegations_1 = require(\"./delegations\");\nconst file_1 = require(\"./file\");\nconst utils_1 = require(\"./utils\");\n// Container for the signed part of targets metadata.\n//\n// Targets contains verifying information about target files and also delegates\n// responsible to other Targets roles.\nclass Targets extends base_1.Signed {\n    constructor(options) {\n        super(options);\n        this.type = base_1.MetadataKind.Targets;\n        this.targets = options.targets || {};\n        this.delegations = options.delegations;\n    }\n    addTarget(target) {\n        this.targets[target.path] = target;\n    }\n    equals(other) {\n        if (!(other instanceof Targets)) {\n            return false;\n        }\n        return (super.equals(other) &&\n            util_1.default.isDeepStrictEqual(this.targets, other.targets) &&\n            util_1.default.isDeepStrictEqual(this.delegations, other.delegations));\n    }\n    toJSON() {\n        const json = {\n            _type: this.type,\n            spec_version: this.specVersion,\n            version: this.version,\n            expires: this.expires,\n            targets: targetsToJSON(this.targets),\n            ...this.unrecognizedFields,\n        };\n        if (this.delegations) {\n            json.delegations = this.delegations.toJSON();\n        }\n        return json;\n    }\n    static fromJSON(data) {\n        const { unrecognizedFields, ...commonFields } = base_1.Signed.commonFieldsFromJSON(data);\n        const { targets, delegations, ...rest } = unrecognizedFields;\n        return new Targets({\n            ...commonFields,\n            targets: targetsFromJSON(targets),\n            delegations: delegationsFromJSON(delegations),\n            unrecognizedFields: rest,\n        });\n    }\n}\nexports.Targets = Targets;\nfunction targetsToJSON(targets) {\n    return Object.entries(targets).reduce((acc, [path, target]) => ({\n        ...acc,\n        [path]: target.toJSON(),\n    }), {});\n}\nfunction targetsFromJSON(data) {\n    let targets;\n    if (utils_1.guard.isDefined(data)) {\n        if (!utils_1.guard.isObjectRecord(data)) {\n            throw new TypeError('targets must be an object');\n        }\n        else {\n            targets = Object.entries(data).reduce((acc, [path, target]) => ({\n                ...acc,\n                [path]: file_1.TargetFile.fromJSON(path, target),\n            }), {});\n        }\n    }\n    return targets;\n}\nfunction delegationsFromJSON(data) {\n    let delegations;\n    if (utils_1.guard.isDefined(data)) {\n        if (!utils_1.guard.isObject(data)) {\n            throw new TypeError('delegations must be an object');\n        }\n        else {\n            delegations = delegations_1.Delegations.fromJSON(data);\n        }\n    }\n    return delegations;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}